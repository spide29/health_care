<!-- <!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Health Care</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/">Home</a>
            </li>
            
          </ul>

        </div>
      </div>
    </nav>

    <div class="container">
      <h1>Login</h1>
      <hr>
      <form action="/signin" method="post">
        {% csrf_token %}

        <div class="form-outline mb-4">
          <input type="text" id="username" name="username" value="{{fname}}" class="form-control" />
          <label class="form-label" for="username">User Name </label>
        </div>

        
          <div class="form-outline mb-4">
            <input type="password" id="pass1" name="pass1" class="form-control" />
            <label class="form-label" for="pass1">Password</label>
          </div>
        
          <div class="row mb-4">
            <div class="col d-flex justify-content-center">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="form2Example31" checked />
                <label class="form-check-label" for="form2Example31"> Remember me </label>
              </div>
            </div>
        
            <div class="col">
              <a href="#!">Forgot password?</a>
            </div>
          </div>
        
          <button type="submit" class="btn btn-primary btn-block mb-4">Sign in</button>
        
          <div class="text-center">
            <p>Not a member? <a href="/signup">Register</a></p>
            <p>or sign up with:</p>
            <button type="button" class="btn btn-link btn-floating mx-1">
              <i class="fab fa-facebook-f"></i>
            </button>
        
            <button type="button" class="btn btn-link btn-floating mx-1">
              <i class="fab fa-google"></i>
            </button>
        
            <button type="button" class="btn btn-link btn-floating mx-1">
              <i class="fab fa-twitter"></i>
            </button>
        
            <button type="button" class="btn btn-link btn-floating mx-1">
              <i class="fab fa-github"></i>
            </button>
          </div>
        </form>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html> -->

<!-- <!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        // Include the CSRF token in AJAX requests
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        
        $(document).ajaxSend(function(event, xhr, settings) {
            if (settings.type === 'POST' || settings.type === 'PUT' || settings.type === 'DELETE') {
                xhr.setRequestHeader('X-CSRFToken', getCookie('csrftoken'));
            }
        });
    </script>
</head>
<body>
    <h1>Login</h1>
    <form id="login-form">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username"><br>
        
        <label for="password">Password:</label>
        <input type="password" id="password" name="password"><br>
        
        <button type="submit">Log In</button>
    </form>
    
    <script>
        $(document).ready(function() {
            $("#login-form").submit(function(event) {
                event.preventDefault();
                
                var formData = {
                    "username": $("#username").val(),
                    "password": $("#password").val()
                };
                
                $.ajax({
                    url: "/home/login-user/",
                    type: "POST",
                    data: formData,
                    success: function(response) {
                        // Handle successful login
                        console.log("Login successful!");
                        console.log(response);
                        
                        if (response.token && response.redirect_url) {
                            // Store the token in local storage or as a cookie
                            // Redirect to the appropriate portal based on redirect URL
                            window.location.href = response.redirect_url;
                        } else {
                            console.log("Invalid response format.");
                        }
                    },
                    error: function(xhr, status, error) {
                        // Handle error
                        console.log("Login failed!");
                        console.log(xhr.responseText);
                    }
                });
            });
        });
    </script>
</body>
</html> -->


<!DOCTYPE html>
<html>
<head>
    <title>Doctor Signup</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
     .swal2-popup {
   font-size: 16px;
}

.swal2-title {
   font-size: 20px;
}

.swal2-confirm {
   font-size: 16px;
}

        body {
            background-color: #f2f2f2;
            font-family: Arial, sans-serif;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
        }
        
        label {
             font-size: 18px;
            display: block;
            margin-bottom: 10px;
            color: #555;
        }
        
        input[type="email"]
        {
            width: 75%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        input[type="text"]
        {
            width: 75%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        input[type="password"] {
            width: 75%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        button[type="submit"] {
            display: block;
            width: 50%;
            padding: 10px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 15px;
            cursor: pointer;
        }
        
        .error-message {
            color: red;
        }
        
        .success-message {
            color: green;
        }
        
        .form-group {
            position: relative;
        }
        
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="password"] {
            padding-right: 40px;
        }
        
        .form-group i {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            color: #ccc;
        }
        
        .form-group i.fa-check-circle {
            color: green;
        }
        
        .form-group i.fa-times-circle {
            color: red;
        }
        @keyframes fadeIn {
           from {
               opacity: 0;
           }
           to {
               opacity: 1;
           }
       }
       @keyframes slideIn {
           from {
               transform: translateX(-20px);
           }
           to {
               transform: translateX(0);
           }
       }
       .container {
           /* Existing styles */
           animation: fadeIn 0.5s ease-in-out;
       }
       p {
           animation: slideIn 0.5s ease-in-out;
       }
       .button-group {
           display: flex;
           justify-content: space-between;
           margin-top: 20px;
       }
       .lable-grp {
           display: flex;
           flex-wrap: wrap;
           justify-content: space-between;
           margin-top: 20px;
       }
.password-container {
   flex-basis: 49%; /* Adjust the width as needed */
}
.success {
   border-color: green !important;
}

.error {
   border-color: red !important;
}
    </style>
</head>
<body>
    <div class="container">
        <h1>Doctor Signup</h1>
        <form id="login-form">
          
            
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" class="typ" id="username" name="username"placeholder="Enter the username">
            </div>
            <div class="password-container">
              <label for="password">Password:</label>
              <input type="password" id="password" name="password"placeholder="Enter the password">
              <i class="fas fa-eye-slash toggle-password"></i>
          </div>
             <div id="error-container" class="error-message"></div>
            <p>If you are already registered? <a href="/home/login/">login here</a>.</p>
            <div class="button-group">
             <button type="button" style="display: block;
             width: 50%;
             padding: 10px;
             background-color: #fd3737;
             color: #fff;
             border: none;
             border-radius: 15px;
             cursor: pointer;" id="reset-button" onclick="resetForm()">Reset</button>
             <button type="submit">Sign Up</button>
           </div>
        </form>
    </div>
    
    <script>
      $(document).ready(function() {
        // Login form submission
        $("#login-form").submit(function(event) {
          event.preventDefault();
    
          var formData = {
            "username": $("#username").val(),
            "password": $("#password").val()
          };
    
          $.ajax({
            url: "/home/login-user/",
            type: "POST",
            data: formData,
            success: function(response) {
              // Handle successful login
              console.log("Login successful!");
              console.log(response);
    
              if (response.token && response.redirect_url) {
                // Store the token in local storage
                localStorage.setItem("token", response.token);
    
                // Redirect to the appropriate portal based on redirect URL
                window.location.href = response.redirect_url;
              } else {
                console.log("Invalid response format.");
              }
            },
            error: function(xhr, status, error) {
              // Handle error
              console.log("Login failed!");
              console.log(xhr.responseText);
    
              // Extract error message from the response
              var errorResponse = JSON.parse(xhr.responseText);
              var errorMessage;
    
              if (errorResponse.error === "Incorrect password") {
                errorMessage = "Incorrect password. Please try again.";
              } else if (errorResponse.error === "Username not found") {
                errorMessage = "Username not found. Please check your username.";
              } else {
                errorMessage = "Invalid credentials.";
              }
    
              // Display error message using SweetAlert
              Swal.fire({
                title: "Error",
                text: errorMessage,
                icon: "error"
              });
            }
          });
        });
      });
</script>    
    
       <script>
        function resetForm() {
            document.getElementById("signup-form").reset();
        }

        $(document).ready(function() {
    $(".toggle-password").click(function() {
        var input = $(this).prev("input");
        var icon = $(this);

        if (input.attr("type") === "password") {
            input.attr("type", "text");
            icon.removeClass("fa-eye-slash").addClass("fa-eye");
        } else {
            input.attr("type", "password");
            icon.removeClass("fa-eye").addClass("fa-eye-slash");
        }
    });
});
     </script>
</body>
</html>
